# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# AUTO Z-OFFSET MESSUNG - MAKROS
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# Diese Datei enthÃ¤lt alle G-Code Makros fÃ¼r die Auto-Offset-Messung
# Die Makros greifen direkt auf [auto_offset] Variablen zu
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# HAUPT-MAKRO FÃœR MAINSAIL UI
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

[gcode_macro AUTO_OFFSET_START]
description: ğŸ¯ Z-Offset Messung mit Auto-Kalibrierung
gcode:
    # Lese Konfiguration direkt aus [auto_offset]
    {% set cfg = printer.configfile.settings.auto_offset %}
    
    # Nutze params falls Ã¼bergeben, sonst aus [auto_offset]
    {% set heat = params.HEAT|default(cfg.temp_enable)|int %}
    {% set qgl = params.QGL|default(cfg.qgl_enable)|int %}
    {% set clean = params.CLEAN|default(cfg.clean_enable)|int %}
    {% set accuracy_check = params.ACCURACY_CHECK|default(cfg.accuracy_check_enable)|int %}
    {% set trigger_distance = params.TRIGGER_DISTANCE|default(cfg.trigger_distance_enable)|int %}
    {% set offset_measure = params.OFFSET_MEASURE|default(cfg.offset_measure_enable)|int %}
    {% set preheat_nozzle_temp = params.PREHEAT_NOZZLE_TEMP|default(cfg.preheat_nozzle_temp)|float %}
    {% set preheat_bed_temp = params.PREHEAT_BED_TEMP|default(cfg.preheat_bed_temp)|float %}
    {% set debug = params.DEBUG|default(cfg.debug_level)|int %}
    
    # Rufe Python-Command mit allen Parametern auf
    _AUTO_OFFSET_START HEAT={heat} QGL={qgl} CLEAN={clean} ACCURACY_CHECK={accuracy_check} TRIGGER_DISTANCE={trigger_distance} OFFSET_MEASURE={offset_measure} PREHEAT_NOZZLE_TEMP={preheat_nozzle_temp} PREHEAT_BED_TEMP={preheat_bed_temp} DEBUG={debug}

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# SCHNELL-MAKROS FÃœR HÃ„UFIGE SZENARIEN
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

[gcode_macro AUTO_OFFSET_QUICK]
description: âš¡ Schnell-Messung (ohne QGL, ohne Heizen)
gcode:
    AUTO_OFFSET_START HEAT=0 QGL=0

[gcode_macro AUTO_OFFSET_COLD]
description: â„ï¸ Kalt-Messung (ohne Heizen)
gcode:
    AUTO_OFFSET_START HEAT=0

[gcode_macro AUTO_OFFSET_NO_CLEAN]
description: ğŸ§¹ Messung ohne Reinigung
gcode:
    AUTO_OFFSET_START CLEAN=0

[gcode_macro AUTO_OFFSET_ACCURACY_ONLY]
description: ğŸ¯ Nur Genauigkeitstest
gcode:
    AUTO_OFFSET_START TRIGGER_DISTANCE=0 OFFSET_MEASURE=0

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# ABBRUCH-MAKRO
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

[gcode_macro AUTO_OFFSET_ABORT]
description: âŒ Bricht laufende Messung ab
gcode:
    _AUTO_OFFSET_ABORT
